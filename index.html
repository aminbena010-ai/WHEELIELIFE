<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wheelie Life - Plataforma Oficial</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        /* ===== RESET Y VARIABLES ===== */
        :root {
            --primary: #4a6fa5;
            --secondary: #ff6b6b;
            --accent: #ffd166;
            --dark: #1a1b2e;
            --darker: #0d0e1a;
            --light: #f8f9fa;
            --success: #4CAF50;
            --warning: #ff9800;
            --info: #2196F3;
            --pixel-border: 3px solid #000;
            --card-bg: rgba(45, 48, 71, 0.9);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 100%);
            color: var(--light);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* ===== TIPOGRAFÍA PIXELADA ===== */
        .pixel-font {
            font-family: 'Press Start 2P', cursive;
            letter-spacing: 1px;
        }

        /* ===== ESTILOS PIXELADOS ===== */
        .pixel-box {
            border: var(--pixel-border);
            box-shadow: 6px 6px 0 rgba(0, 0, 0, 0.5);
            position: relative;
            background: var(--card-bg);
        }

        .pixel-box::after {
            content: '';
            position: absolute;
            top: 4px;
            left: 4px;
            right: -4px;
            bottom: -4px;
            border: var(--pixel-border);
            z-index: -1;
        }

        .pixel-btn {
            border: var(--pixel-border);
            background: var(--primary);
            color: white;
            font-weight: bold;
            cursor: pointer;
            padding: 12px 24px;
            transition: var(--transition);
            position: relative;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.8rem;
            letter-spacing: 1px;
        }

        .pixel-btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.5);
        }

        .pixel-btn:active {
            transform: translateY(0);
            box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
        }

        /* ===== LAYOUT PRINCIPAL ===== */
        #app {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* ===== HEADER ===== */
        .main-header {
            background: var(--dark);
            border-bottom: var(--pixel-border);
            padding: 15px 20px;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            text-decoration: none;
        }

        .logo-icon {
            width: 60px;
            height: 60px;
            background: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            border: var(--pixel-border);
            transform: rotate(45deg);
        }

        .logo-icon i {
            transform: rotate(-45deg);
            font-size: 24px;
            color: white;
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo-title {
            font-size: 1.8rem;
            color: var(--accent);
            text-shadow: 2px 2px 0 #000;
            line-height: 1.2;
        }

        .logo-subtitle {
            font-size: 0.9rem;
            color: #aaa;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            border: var(--pixel-border);
            font-weight: bold;
        }

        .notification-bell {
            position: relative;
            cursor: pointer;
            font-size: 1.3rem;
            color: var(--accent);
        }

        .notification-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--secondary);
            color: white;
            font-size: 0.7rem;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: var(--pixel-border);
        }

        /* ===== CONTENIDO PRINCIPAL ===== */
        .main-content {
            flex: 1;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        /* ===== SECCIONES ===== */
        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            color: var(--accent);
            margin-bottom: 20px;
            text-shadow: 2px 2px 0 #000;
            font-size: 1.8rem;
        }

        /* ===== PÁGINA DE INICIO ===== */
        .hero {
            text-align: center;
            padding: 40px 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--accent);
        }

        .hero p {
            font-size: 1.2rem;
            color: #aaa;
            max-width: 600px;
            margin: 0 auto 30px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            padding: 20px;
            text-align: center;
            background: var(--card-bg);
            border: var(--pixel-border);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--accent);
            display: block;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #aaa;
            font-size: 0.9rem;
        }

        /* ===== PÁGINA DE VERSIONES ===== */
        .versions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .version-card {
            padding: 20px;
            transition: var(--transition);
        }

        .version-card:hover {
            transform: translateY(-5px);
        }

        .version-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .version-title {
            color: var(--accent);
            font-size: 1.3rem;
        }

        .version-badge {
            display: inline-block;
            padding: 5px 10px;
            background: var(--secondary);
            color: white;
            font-size: 0.7rem;
            font-weight: bold;
            border: var(--pixel-border);
        }

        .version-badge.stable {
            background: var(--success);
        }

        .version-badge.beta {
            background: var(--warning);
        }

        .version-info {
            margin-bottom: 15px;
            color: #aaa;
        }

        .version-features {
            list-style: none;
            margin-bottom: 20px;
        }

        .version-features li {
            padding: 5px 0;
            color: #ccc;
            position: relative;
            padding-left: 20px;
        }

        .version-features li:before {
            content: "►";
            position: absolute;
            left: 0;
            color: var(--secondary);
        }

        /* ===== FORMULARIOS ===== */
        .auth-form {
            max-width: 400px;
            margin: 0 auto;
            padding: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--accent);
            font-weight: bold;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: var(--pixel-border);
            color: white;
            font-size: 1rem;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        /* ===== NOTIFICACIONES ===== */
        .notifications-panel {
            max-width: 500px;
            margin: 0 auto;
        }

        .notification-item {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: var(--transition);
        }

        .notification-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .notification-item.unread {
            background: rgba(33, 150, 243, 0.1);
        }

        .notification-title {
            color: white;
            margin-bottom: 5px;
        }

        .notification-meta {
            color: #aaa;
            font-size: 0.8rem;
        }

        /* ===== PANEL DE ADMIN ===== */
        .admin-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .admin-card {
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .admin-card:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .admin-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .admin-title {
            color: var(--accent);
            margin-bottom: 10px;
        }

        /* ===== MODALES ===== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--dark);
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: var(--secondary);
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* ===== INSTALACIÓN ===== */
        .install-progress {
            width: 100%;
            height: 30px;
            background: rgba(0, 0, 0, 0.3);
            border: var(--pixel-border);
            margin: 20px 0;
            overflow: hidden;
        }

        .install-progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 0.3s;
        }

        .install-steps {
            margin: 20px 0;
        }

        .install-step {
            padding: 10px;
            border-left: 3px solid var(--primary);
            margin-bottom: 10px;
            color: #aaa;
        }

        .install-step.active {
            color: white;
            border-color: var(--accent);
            background: rgba(255, 209, 102, 0.1);
        }

        .install-step.completed {
            color: var(--success);
            border-color: var(--success);
        }

        /* ===== FOOTER ===== */
        .main-footer {
            background: var(--dark);
            border-top: var(--pixel-border);
            padding: 20px;
            text-align: center;
            margin-top: 40px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 15px 0;
        }

        .footer-link {
            color: var(--accent);
            text-decoration: none;
        }

        .footer-link:hover {
            text-decoration: underline;
        }

        .copyright {
            color: #aaa;
            font-size: 0.9rem;
        }

        /* ===== NAVEGACIÓN ===== */
        .main-nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0 40px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: var(--pixel-border);
            color: white;
            cursor: pointer;
            transition: var(--transition);
            font-family: 'Press Start 2P', cursive;
            font-size: 0.7rem;
        }

        .nav-btn:hover {
            background: var(--primary);
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: var(--secondary);
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            .versions-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .main-nav {
                flex-direction: column;
                align-items: center;
            }

            .nav-btn {
                width: 100%;
                max-width: 300px;
            }
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .logo-title {
                font-size: 1.4rem;
            }
        }

        /* ===== ANIMACIONES ===== */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .bounce {
            animation: bounce 2s infinite;
        }

        /* ===== SCROLLBAR ===== */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--darker);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border: var(--pixel-border);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary);
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="main-header pixel-box">
            <div class="header-content">
                <a href="#" class="logo" onclick="showSection('home')">
                    <div class="logo-icon">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <div class="logo-text">
                        <h1 class="logo-title pixel-font">WHEELIE LIFE</h1>
                        <div class="logo-subtitle">Plataforma Oficial</div>
                    </div>
                </a>
                
                <div class="header-actions">
                    <div class="notification-bell" onclick="showSection('notifications')">
                        <i class="fas fa-bell"></i>
                        <span class="notification-count" id="notification-count">0</span>
                    </div>
                    
                    <div class="user-info" id="user-info">
                        <!-- Se llenará con JavaScript -->
                    </div>
                </div>
            </div>
        </header>

        <!-- Navegación -->
        <nav class="main-nav">
            <button class="nav-btn active" onclick="showSection('home')">
                <i class="fas fa-home"></i> Inicio
            </button>
            <button class="nav-btn" onclick="showSection('versions')">
                <i class="fas fa-download"></i> Versiones
            </button>
            <button class="nav-btn" onclick="showSection('install')">
                <i class="fas fa-gamepad"></i> Jugar
            </button>
            <button class="nav-btn" onclick="showSection('profile')">
                <i class="fas fa-user"></i> Perfil
            </button>
            <button class="nav-btn" id="admin-btn" style="display: none;" onclick="showSection('admin')">
                <i class="fas fa-crown"></i> Admin
            </button>
            <button class="nav-btn" onclick="showSection('documentation')">
                <i class="fas fa-book"></i> Docs
            </button>
        </nav>

        <!-- Contenido Principal -->
        <main class="main-content">
            <!-- Sección: Inicio -->
            <section id="home-section" class="section active">
                <div class="hero pixel-box">
                    <h1 class="pixel-font">¡Bienvenido a Wheelie Life!</h1>
                    <p>La plataforma oficial para descargar, instalar y gestionar tu juego de acrobacias en bicicleta.</p>
                    <button class="pixel-btn" onclick="showSection('versions')">
                        <i class="fas fa-download"></i> DESCARGAR JUEGO
                    </button>
                </div>

                <h2 class="section-title pixel-font">Estadísticas de la Plataforma</h2>
                <div class="stats-grid">
                    <div class="stat-card pixel-box">
                        <span class="stat-number" id="stat-downloads">0</span>
                        <span class="stat-label">Descargas Totales</span>
                    </div>
                    <div class="stat-card pixel-box">
                        <span class="stat-number" id="stat-users">0</span>
                        <span class="stat-label">Usuarios Registrados</span>
                    </div>
                    <div class="stat-card pixel-box">
                        <span class="stat-number" id="stat-online">0</span>
                        <span class="stat-label">Jugadores Online</span>
                    </div>
                    <div class="stat-card pixel-box">
                        <span class="stat-number">2.0.1</span>
                        <span class="stat-label">Última Versión</span>
                    </div>
                </div>

                <h2 class="section-title pixel-font">¿Cómo Empezar?</h2>
                <div class="versions-grid">
                    <div class="version-card pixel-box">
                        <div class="version-header">
                            <h3 class="version-title pixel-font">1. Crear Cuenta</h3>
                        </div>
                        <p>Regístrate gratis para acceder a todas las funciones y guardar tu progreso.</p>
                        <button class="pixel-btn" onclick="showAuthModal('register')" style="width: 100%; margin-top: 15px;">
                            <i class="fas fa-user-plus"></i> REGISTRARSE
                        </button>
                    </div>
                    
                    <div class="version-card pixel-box">
                        <div class="version-header">
                            <h3 class="version-title pixel-font">2. Instalar Juego</h3>
                        </div>
                        <p>Descarga la última versión de Wheelie Life en tu dispositivo.</p>
                        <button class="pixel-btn" onclick="showSection('versions')" style="width: 100%; margin-top: 15px;">
                            <i class="fas fa-download"></i> INSTALAR
                        </button>
                    </div>
                    
                    <div class="version-card pixel-box">
                        <div class="version-header">
                            <h3 class="version-title pixel-font">3. ¡A Jugar!</h3>
                        </div>
                        <p>Lanza el juego y disfruta de las acrobacias en bicicleta más realistas.</p>
                        <button class="pixel-btn" onclick="showSection('install')" style="width: 100%; margin-top: 15px;">
                            <i class="fas fa-play"></i> JUGAR AHORA
                        </button>
                    </div>
                </div>
            </section>

            <!-- Sección: Versiones -->
            <section id="versions-section" class="section">
                <h2 class="section-title pixel-font">Versiones Disponibles</h2>
                <p style="margin-bottom: 20px; color: #aaa;">Selecciona una versión para instalar en tu dispositivo.</p>
                
                <div class="versions-grid" id="versions-container">
                    <!-- Las versiones se cargarán dinámicamente -->
                </div>
            </section>

            <!-- Sección: Instalación/Jugar -->
            <section id="install-section" class="section">
                <h2 class="section-title pixel-font">Instalar y Jugar</h2>
                
                <div class="version-card pixel-box" style="max-width: 600px; margin: 0 auto;">
                    <div class="version-header">
                        <h3 class="version-title pixel-font">Instalador de Wheelie Life</h3>
                        <span class="version-badge stable">RECOMENDADO</span>
                    </div>
                    
                    <div class="version-info">
                        <p>Instala la última versión estable del juego en tu dispositivo.</p>
                        <div style="margin: 15px 0; padding: 15px; background: rgba(0,0,0,0.3); border: var(--pixel-border);">
                            <strong>Tamaño:</strong> 45 MB<br>
                            <strong>Versión:</strong> 2.0.1<br>
                            <strong>Plataforma:</strong> Windows, macOS, Linux, Android
                        </div>
                    </div>
                    
                    <div id="install-controls">
                        <button class="pixel-btn" onclick="startInstallation()" style="width: 100%; padding: 15px; font-size: 1rem;">
                            <i class="fas fa-download"></i> INSTALAR JUEGO
                        </button>
                    </div>
                    
                    <div id="install-progress-container" style="display: none;">
                        <div class="install-progress">
                            <div class="install-progress-bar" id="install-progress-bar"></div>
                        </div>
                        <div class="install-steps">
                            <div class="install-step" id="step1">Verificando sistema...</div>
                            <div class="install-step" id="step2">Descargando archivos...</div>
                            <div class="install-step" id="step3">Instalando...</div>
                            <div class="install-step" id="step4">Configurando...</div>
                            <div class="install-step" id="step5">Finalizando...</div>
                        </div>
                        <div style="text-align: center; margin-top: 20px;">
                            <div id="install-status">Preparando instalación...</div>
                        </div>
                    </div>
                    
                    <div id="install-complete" style="display: none; text-align: center; padding: 20px;">
                        <div style="font-size: 4rem; color: var(--success); margin-bottom: 20px;">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h3 style="color: var(--accent); margin-bottom: 15px;">¡Instalación Completada!</h3>
                        <p style="margin-bottom: 20px;">Wheelie Life se ha instalado correctamente en tu dispositivo.</p>
                        <button class="pixel-btn" onclick="launchGame()">
                            <i class="fas fa-play"></i> JUGAR AHORA
                        </button>
                    </div>
                </div>
            </section>

            <!-- Sección: Perfil -->
            <section id="profile-section" class="section">
                <h2 class="section-title pixel-font">Mi Perfil</h2>
                
                <div id="profile-content">
                    <!-- Se llenará dinámicamente -->
                </div>
            </section>

            <!-- Sección: Notificaciones -->
            <section id="notifications-section" class="section">
                <h2 class="section-title pixel-font">Notificaciones</h2>
                
                <div class="notifications-panel">
                    <div id="notifications-list">
                        <!-- Las notificaciones se cargarán dinámicamente -->
                    </div>
                </div>
            </section>

            <!-- Sección: Admin -->
            <section id="admin-section" class="section">
                <h2 class="section-title pixel-font">Panel de Administración</h2>
                
                <div class="admin-grid">
                    <div class="admin-card pixel-box" onclick="showAdminPanel('users')">
                        <div class="admin-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3 class="admin-title pixel-font">Usuarios</h3>
                        <p>Gestionar usuarios registrados</p>
                    </div>
                    
                    <div class="admin-card pixel-box" onclick="showAdminPanel('upload')">
                        <div class="admin-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <h3 class="admin-title pixel-font">Subir Versión</h3>
                        <p>Publicar nueva actualización</p>
                    </div>
                    
                    <div class="admin-card pixel-box" onclick="showAdminPanel('messages')">
                        <div class="admin-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <h3 class="admin-title pixel-font">Mensajes</h3>
                        <p>Enviar notificaciones</p>
                    </div>
                    
                    <div class="admin-card pixel-box" onclick="showAdminPanel('stats')">
                        <div class="admin-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <h3 class="admin-title pixel-font">Estadísticas</h3>
                        <p>Ver análisis de uso</p>
                    </div>
                </div>
                
                <div id="admin-content">
                    <!-- El contenido de admin se cargará dinámicamente -->
                </div>
            </section>

            <!-- Sección: Documentación -->
            <section id="documentation-section" class="section">
                <h2 class="section-title pixel-font">Documentación</h2>
                
                <div class="versions-grid">
                    <div class="version-card pixel-box">
                        <div class="version-header">
                            <h3 class="version-title pixel-font">Guía de Inicio</h3>
                        </div>
                        <p>Aprende los conceptos básicos de Wheelie Life y comienza a jugar.</p>
                        <button class="pixel-btn" onclick="openDocumentation('guide')" style="width: 100%; margin-top: 15px;">
                            <i class="fas fa-book-open"></i> ABRIR GUÍA
                        </button>
                    </div>
                    
                    <div class="version-card pixel-box">
                        <div class="version-header">
                            <h3 class="version-title pixel-font">Controles</h3>
                        </div>
                        <p>Lista completa de controles para todas las plataformas.</p>
                        <button class="pixel-btn" onclick="openDocumentation('controls')" style="width: 100%; margin-top: 15px;">
                            <i class="fas fa-gamepad"></i> VER CONTROLES
                        </button>
                    </div>
                    
                    <div class="version-card pixel-box">
                        <div class="version-header">
                            <h3 class="version-title pixel-font">EULA</h3>
                        </div>
                        <p>Licencia de uso y términos del juego.</p>
                        <button class="pixel-btn" onclick="openDocumentation('eula')" style="width: 100%; margin-top: 15px;">
                            <i class="fas fa-file-contract"></i> VER LICENCIA
                        </button>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="main-footer pixel-box">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="#" class="footer-link" onclick="showSection('versions')">Descargar</a>
                    <a href="#" class="footer-link" onclick="showSection('documentation')">Documentación</a>
                    <a href="https://aminbena010-ai.github.io/WHEELIE-LIFE/" target="_blank" class="footer-link">Web del Juego</a>
                    <a href="#" class="footer-link" onclick="showSection('profile')">Soporte</a>
                </div>
                <div class="copyright">
                    &copy; 2023 Wheelie Life. Creado por AminBena010. Todos los derechos reservados.
                </div>
            </div>
        </footer>

        <!-- Modales -->
        
        <!-- Modal de Login -->
        <div class="modal" id="login-modal">
            <div class="modal-content pixel-box">
                <button class="modal-close" onclick="closeModal('login-modal')">&times;</button>
                <h2 class="section-title pixel-font" style="margin-bottom: 20px;">Iniciar Sesión</h2>
                
                <form id="login-form">
                    <div class="form-group">
                        <label class="form-label">Email o Usuario</label>
                        <input type="text" class="form-input" id="login-username" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Contraseña</label>
                        <input type="password" class="form-input" id="login-password" required>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="remember-me"> Recordar sesión
                        </label>
                    </div>
                    
                    <button type="submit" class="pixel-btn" style="width: 100%; padding: 15px;">
                        <i class="fas fa-sign-in-alt"></i> INICIAR SESIÓN
                    </button>
                </form>
                
                <div style="text-align: center; margin-top: 20px;">
                    <p style="color: #aaa;">¿No tienes cuenta? <a href="#" onclick="showAuthModal('register')" style="color: var(--accent);">Regístrate aquí</a></p>
                </div>
            </div>
        </div>

        <!-- Modal de Registro -->
        <div class="modal" id="register-modal">
            <div class="modal-content pixel-box">
                <button class="modal-close" onclick="closeModal('register-modal')">&times;</button>
                <h2 class="section-title pixel-font" style="margin-bottom: 20px;">Crear Cuenta</h2>
                
                <form id="register-form">
                    <div class="form-group">
                        <label class="form-label">Nombre de Usuario</label>
                        <input type="text" class="form-input" id="register-username" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="register-email" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Contraseña</label>
                        <input type="password" class="form-input" id="register-password" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Confirmar Contraseña</label>
                        <input type="password" class="form-input" id="register-confirm" required>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="accept-terms" required>
                            Acepto los <a href="#" onclick="openDocumentation('eula')" style="color: var(--accent);">términos y condiciones</a>
                        </label>
                    </div>
                    
                    <button type="submit" class="pixel-btn" style="width: 100%; padding: 15px;">
                        <i class="fas fa-user-plus"></i> CREAR CUENTA
                    </button>
                </form>
            </div>
        </div>

        <!-- Modal de Admin: Subir Versión -->
        <div class="modal" id="admin-upload-modal">
            <div class="modal-content pixel-box">
                <button class="modal-close" onclick="closeModal('admin-upload-modal')">&times;</button>
                <h2 class="section-title pixel-font" style="margin-bottom: 20px;">Subir Nueva Versión</h2>
                
                <form id="upload-form">
                    <div class="form-group">
                        <label class="form-label">Nombre de la Versión</label>
                        <input type="text" class="form-input" id="version-name" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Número de Versión</label>
                        <input type="text" class="form-input" id="version-number" required placeholder="ej: 2.1.0">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Descripción</label>
                        <textarea class="form-input" id="version-desc" rows="3" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">URL del Archivo (.zip en Drive)</label>
                        <input type="url" class="form-input" id="version-url" required placeholder="https://drive.google.com/...">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Tamaño</label>
                        <input type="text" class="form-input" id="version-size" required placeholder="ej: 45 MB">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Tipo</label>
                        <select class="form-input" id="version-type" required>
                            <option value="stable">Estable</option>
                            <option value="beta">Beta</option>
                            <option value="alpha">Alpha</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="pixel-btn" style="width: 100%; padding: 15px;">
                        <i class="fas fa-cloud-upload-alt"></i> SUBIR VERSIÓN
                    </button>
                </form>
            </div>
        </div>

        <!-- Modal de Notificación -->
        <div class="modal" id="notification-modal">
            <div class="modal-content pixel-box" style="max-width: 400px;">
                <button class="modal-close" onclick="closeModal('notification-modal')">&times;</button>
                <div id="notification-content">
                    <!-- Contenido de la notificación se llenará dinámicamente -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // =============================================
        // SISTEMA DE BASE DE DATOS (LocalStorage)
        // =============================================
        
        // Claves para localStorage
        const DB_KEYS = {
            USERS: 'wheelie_life_users',
            VERSIONS: 'wheelie_life_versions',
            NOTIFICATIONS: 'wheelie_life_notifications',
            INSTALLATIONS: 'wheelie_life_installations',
            STATS: 'wheelie_life_stats',
            SETTINGS: 'wheelie_life_settings'
        };
        
        // Usuario por defecto (admin)
        const DEFAULT_ADMIN = {
            id: 1,
            username: 'admin',
            email: 'admin@wheelielife.com',
            password: 'admin123',
            role: 'admin',
            createdAt: new Date().toISOString(),
            avatarColor: '#4a6fa5'
        };
        
        // Versiones por defecto
        const DEFAULT_VERSIONS = [
            {
                id: 1,
                name: "Wheelie Life 2.0",
                version: "v2.0.1",
                date: "2023-10-15",
                size: "45 MB",
                description: "La versión más estable con todas las características completas.",
                features: ["Nuevos niveles", "Física mejorada", "5 personajes", "Modo carrera"],
                type: "stable",
                downloads: 12547,
                isLatest: true
            },
            {
                id: 2,
                name: "Wheelie Life Beta",
                version: "v1.9.5",
                date: "2023-08-22",
                size: "42 MB",
                description: "Versión beta con características experimentales.",
                features: ["Nuevos trucos", "Multijugador local", "Editor de niveles"],
                type: "beta",
                downloads: 8943,
                isLatest: false
            },
            {
                id: 3,
                name: "Wheelie Life Classic",
                version: "v1.5.0",
                date: "2023-05-10",
                size: "35 MB",
                description: "Versión clásica estable para dispositivos menos potentes.",
                features: ["Optimizado", "8 niveles", "Controles simples", "Gráficos retro"],
                type: "stable",
                downloads: 7562,
                isLatest: false
            }
        ];
        
        // =============================================
        // INICIALIZACIÓN DE LA APLICACIÓN
        // =============================================
        
        // Estado global de la aplicación
        let appState = {
            currentUser: null,
            currentSection: 'home',
            notifications: [],
            unreadNotifications: 0
        };
        
        // Inicializar la aplicación cuando el DOM esté listo
        document.addEventListener('DOMContentLoaded', function() {
            initDatabase();
            initApp();
            setupEventListeners();
        });
        
        // Inicializar la base de datos
        function initDatabase() {
            // Inicializar usuarios si no existen
            if (!localStorage.getItem(DB_KEYS.USERS)) {
                localStorage.setItem(DB_KEYS.USERS, JSON.stringify([DEFAULT_ADMIN]));
            }
            
            // Inicializar versiones si no existen
            if (!localStorage.getItem(DB_KEYS.VERSIONS)) {
                localStorage.setItem(DB_KEYS.VERSIONS, JSON.stringify(DEFAULT_VERSIONS));
            }
            
            // Inicializar notificaciones si no existen
            if (!localStorage.getItem(DB_KEYS.NOTIFICATIONS)) {
                localStorage.setItem(DB_KEYS.NOTIFICATIONS, JSON.stringify([]));
            }
            
            // Inicializar instalaciones si no existen
            if (!localStorage.getItem(DB_KEYS.INSTALLATIONS)) {
                localStorage.setItem(DB_KEYS.INSTALLATIONS, JSON.stringify({}));
            }
            
            // Inicializar estadísticas si no existen
            if (!localStorage.getItem(DB_KEYS.STATS)) {
                const stats = {
                    totalDownloads: DEFAULT_VERSIONS.reduce((sum, v) => sum + v.downloads, 0),
                    totalUsers: JSON.parse(localStorage.getItem(DB_KEYS.USERS)).length,
                    activeInstalls: 0
                };
                localStorage.setItem(DB_KEYS.STATS, JSON.stringify(stats));
            }
        }
        
        // Inicializar la aplicación
        function initApp() {
            // Verificar si hay usuario logueado
            const savedUser = localStorage.getItem('wheelie_current_user');
            if (savedUser) {
                appState.currentUser = JSON.parse(savedUser);
            }
            
            // Actualizar la interfaz de usuario
            updateUI();
            
            // Cargar sección actual
            loadCurrentSection();
            
            // Actualizar estadísticas en tiempo real
            updateStats();
            
            // Simular usuarios online
            updateOnlineUsers();
            setInterval(updateOnlineUsers, 10000);
        }
        
        // Configurar event listeners
        function setupEventListeners() {
            // Formulario de login
            document.getElementById('login-form').addEventListener('submit', function(e) {
                e.preventDefault();
                loginUser();
            });
            
            // Formulario de registro
            document.getElementById('register-form').addEventListener('submit', function(e) {
                e.preventDefault();
                registerUser();
            });
            
            // Formulario de subida (admin)
            document.getElementById('upload-form').addEventListener('submit', function(e) {
                e.preventDefault();
                uploadNewVersion();
            });
        }
        
        // =============================================
        // FUNCIONES DE AUTENTICACIÓN
        // =============================================
        
        // Mostrar modal de autenticación
        function showAuthModal(type) {
            if (type === 'login') {
                closeModal('register-modal');
                openModal('login-modal');
            } else {
                closeModal('login-modal');
                openModal('register-modal');
            }
        }
        
        // Iniciar sesión
        function loginUser() {
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;
            const remember = document.getElementById('remember-me').checked;
            
            const users = JSON.parse(localStorage.getItem(DB_KEYS.USERS));
            const user = users.find(u => 
                (u.username === username || u.email === username) && 
                u.password === password
            );
            
            if (user) {
                // Eliminar contraseña por seguridad
                const { password, ...userWithoutPassword } = user;
                appState.currentUser = userWithoutPassword;
                
                // Guardar en localStorage si se seleccionó "recordar sesión"
                if (remember) {
                    localStorage.setItem('wheelie_current_user', JSON.stringify(userWithoutPassword));
                } else {
                    sessionStorage.setItem('wheelie_current_user', JSON.stringify(userWithoutPassword));
                }
                
                // Actualizar UI
                updateUI();
                
                // Cerrar modal
                closeModal('login-modal');
                
                // Mostrar notificación de bienvenida
                showNotification('¡Bienvenido de nuevo!', `Hola ${user.username}, has iniciado sesión correctamente.`, 'success');
                
                // Actualizar estadísticas
                updateStats();
                
                // Recargar sección actual
                loadCurrentSection();
            } else {
                alert('Usuario o contraseña incorrectos. Por favor, intenta de nuevo.');
            }
        }
        
        // Registrar usuario
        function registerUser() {
            const username = document.getElementById('register-username').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const confirm = document.getElementById('register-confirm').value;
            
            // Validaciones
            if (password !== confirm) {
                alert('Las contraseñas no coinciden.');
                return;
            }
            
            if (password.length < 6) {
                alert('La contraseña debe tener al menos 6 caracteres.');
                return;
            }
            
            const users = JSON.parse(localStorage.getItem(DB_KEYS.USERS));
            
            // Verificar si el usuario ya existe
            if (users.some(u => u.username === username)) {
                alert('El nombre de usuario ya está en uso.');
                return;
            }
            
            if (users.some(u => u.email === email)) {
                alert('El email ya está registrado.');
                return;
            }
            
            // Crear nuevo usuario
            const newUser = {
                id: Date.now(),
                username,
                email,
                password,
                role: 'user',
                createdAt: new Date().toISOString(),
                avatarColor: getRandomColor()
            };
            
            users.push(newUser);
            localStorage.setItem(DB_KEYS.USERS, JSON.stringify(users));
            
            // Eliminar contraseña por seguridad
            const { password: _, ...userWithoutPassword } = newUser;
            appState.currentUser = userWithoutPassword;
            sessionStorage.setItem('wheelie_current_user', JSON.stringify(userWithoutPassword));
            
            // Actualizar UI
            updateUI();
            
            // Cerrar modal
            closeModal('register-modal');
            
            // Mostrar notificación de bienvenida
            showNotification('¡Cuenta creada!', `Bienvenido ${username}, tu cuenta ha sido creada exitosamente.`, 'success');
            
            // Actualizar estadísticas
            updateStats();
            
            // Recargar sección actual
            loadCurrentSection();
        }
        
        // Cerrar sesión
        function logoutUser() {
            appState.currentUser = null;
            localStorage.removeItem('wheelie_current_user');
            sessionStorage.removeItem('wheelie_current_user');
            
            // Actualizar UI
            updateUI();
            
            // Mostrar notificación
            showNotification('Sesión cerrada', 'Has cerrado sesión correctamente.', 'info');
            
            // Regresar a la página de inicio
            showSection('home');
        }
        
        // =============================================
        // FUNCIONES DE INTERFAZ DE USUARIO
        // =============================================
        
        // Actualizar toda la UI
        function updateUI() {
            updateUserInfo();
            updateNotificationCount();
            updateAdminButton();
        }
        
        // Actualizar información del usuario
        function updateUserInfo() {
            const userInfoEl = document.getElementById('user-info');
            
            if (appState.currentUser) {
                const initials = appState.currentUser.username.substring(0, 2).toUpperCase();
                userInfoEl.innerHTML = `
                    <div class="user-avatar" style="background-color: ${appState.currentUser.avatarColor || '#4a6fa5'}">
                        ${initials}
                    </div>
                    <div>
                        <div style="font-weight: bold;">${appState.currentUser.username}</div>
                        <div style="font-size: 0.8rem; color: #aaa;">${appState.currentUser.role === 'admin' ? 'Administrador' : 'Usuario'}</div>
                        <button onclick="logoutUser()" style="background: none; border: none; color: var(--secondary); cursor: pointer; font-size: 0.8rem; margin-top: 5px;">
                            Cerrar sesión
                        </button>
                    </div>
                `;
            } else {
                userInfoEl.innerHTML = `
                    <button class="pixel-btn" onclick="showAuthModal('login')" style="padding: 8px 15px;">
                        <i class="fas fa-sign-in-alt"></i> Iniciar Sesión
                    </button>
                `;
            }
        }
        
        // Actualizar contador de notificaciones
        function updateNotificationCount() {
            if (!appState.currentUser) {
                document.getElementById('notification-count').textContent = '0';
                return;
            }
            
            const notifications = JSON.parse(localStorage.getItem(DB_KEYS.NOTIFICATIONS)) || [];
            const unread = notifications.filter(n => 
                n.userId === appState.currentUser.id && !n.read
            ).length;
            
            document.getElementById('notification-count').textContent = unread;
            appState.unreadNotifications = unread;
        }
        
        // Mostrar/ocultar botón de admin
        function updateAdminButton() {
            const adminBtn = document.getElementById('admin-btn');
            if (appState.currentUser && appState.currentUser.role === 'admin') {
                adminBtn.style.display = 'block';
            } else {
                adminBtn.style.display = 'none';
            }
        }
        
        // Mostrar sección específica
        function showSection(sectionId) {
            // Verificar autenticación para secciones protegidas
            const protectedSections = ['profile', 'notifications', 'admin'];
            if (protectedSections.includes(sectionId) && !appState.currentUser) {
                showAuthModal('login');
                return;
            }
            
            // Actualizar botones de navegación
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.querySelectorAll('.nav-btn').forEach(btn => {
                if (btn.textContent.includes(getSectionName(sectionId))) {
                    btn.classList.add('active');
                }
            });
            
            // Ocultar todas las secciones
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Mostrar sección seleccionada
            const targetSection = document.getElementById(`${sectionId}-section`);
            if (targetSection) {
                targetSection.classList.add('active');
                appState.currentSection = sectionId;
                
                // Cargar contenido de la sección
                loadSectionContent(sectionId);
            }
        }
        
        // Obtener nombre de sección para botones
        function getSectionName(sectionId) {
            const names = {
                'home': 'Inicio',
                'versions': 'Versiones',
                'install': 'Jugar',
                'profile': 'Perfil',
                'notifications': 'Notificaciones',
                'admin': 'Admin',
                'documentation': 'Docs'
            };
            return names[sectionId] || sectionId;
        }
        
        // Cargar sección actual
        function loadCurrentSection() {
            loadSectionContent(appState.currentSection);
        }
        
        // Cargar contenido de sección específica
        function loadSectionContent(sectionId) {
            switch(sectionId) {
                case 'home':
                    loadHomeContent();
                    break;
                case 'versions':
                    loadVersionsContent();
                    break;
                case 'install':
                    loadInstallContent();
                    break;
                case 'profile':
                    loadProfileContent();
                    break;
                case 'notifications':
                    loadNotificationsContent();
                    break;
                case 'admin':
                    loadAdminContent();
                    break;
                case 'documentation':
                    loadDocumentationContent();
                    break;
            }
        }
        
        // =============================================
        // FUNCIONES DE CONTENIDO
        // =============================================
        
        // Cargar contenido de inicio
        function loadHomeContent() {
            updateStats();
        }
        
        // Cargar contenido de versiones
        function loadVersionsContent() {
            const versions = JSON.parse(localStorage.getItem(DB_KEYS.VERSIONS)) || [];
            const container = document.getElementById('versions-container');
            
            if (versions.length === 0) {
                container.innerHTML = '<p>No hay versiones disponibles en este momento.</p>';
                return;
            }
            
            let html = '';
            versions.forEach(version => {
                const isInstalled = checkIfInstalled(version.id);
                
                html += `
                    <div class="version-card pixel-box">
                        <div class="version-header">
                            <h3 class="version-title pixel-font">${version.name}</h3>
                            <span class="version-badge ${version.type}">${version.type.toUpperCase()}</span>
                        </div>
                        
                        <div class="version-info">
                            <p>${version.description}</p>
                            <div style="margin: 10px 0; padding: 10px; background: rgba(0,0,0,0.3); border: var(--pixel-border);">
                                <strong>Versión:</strong> ${version.version}<br>
                                <strong>Tamaño:</strong> ${version.size}<br>
                                <strong>Fecha:</strong> ${version.date}<br>
                                <strong>Descargas:</strong> ${version.downloads.toLocaleString()}
                            </div>
                        </div>
                        
                        <ul class="version-features">
                            ${version.features.map(feature => `<li>${feature}</li>`).join('')}
                        </ul>
                        
                        <button class="pixel-btn" onclick="installVersion(${version.id})" style="width: 100%;">
                            ${isInstalled ? '<i class="fas fa-play"></i> JUGAR' : '<i class="fas fa-download"></i> INSTALAR'}
                        </button>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        // Cargar contenido de instalación
        function loadInstallContent() {
            // Verificar si hay versión instalada
            const installations = JSON.parse(localStorage.getItem(DB_KEYS.INSTALLATIONS)) || {};
            const userId = appState.currentUser ? appState.currentUser.id : 'guest';
            const userInstallations = installations[userId] || [];
            
            if (userInstallations.length > 0) {
                // Mostrar botón para jugar
                document.getElementById('install-controls').innerHTML = `
                    <button class="pixel-btn" onclick="launchGame()" style="width: 100%; padding: 15px; font-size: 1rem;">
                        <i class="fas fa-play"></i> JUGAR WHEELIE LIFE
                    </button>
                    <button class="pixel-btn" onclick="startInstallation()" style="width: 100%; margin-top: 10px; padding: 10px; background: rgba(255,255,255,0.1);">
                        <i class="fas fa-redo"></i> REINSTALAR
                    </button>
                `;
            }
        }
        
        // Cargar contenido del perfil
        function loadProfileContent() {
            const user = appState.currentUser;
            if (!user) return;
            
            // Obtener instalaciones del usuario
            const installations = JSON.parse(localStorage.getItem(DB_KEYS.INSTALLATIONS)) || {};
            const userInstallations = installations[user.id] || [];
            
            document.getElementById('profile-content').innerHTML = `
                <div class="version-card pixel-box" style="max-width: 600px; margin: 0 auto;">
                    <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 20px;">
                        <div class="user-avatar" style="width: 80px; height: 80px; font-size: 1.5rem; background-color: ${user.avatarColor}">
                            ${user.username.substring(0, 2).toUpperCase()}
                        </div>
                        <div>
                            <h3 style="color: var(--accent); font-size: 1.5rem;">${user.username}</h3>
                            <p><i class="fas fa-envelope"></i> ${user.email}</p>
                            <p><i class="fas fa-user-tag"></i> ${user.role === 'admin' ? 'Administrador' : 'Usuario'}</p>
                            <p><i class="fas fa-calendar"></i> Miembro desde: ${new Date(user.createdAt).toLocaleDateString()}</p>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 20px 0;">
                        <div class="stat-card pixel-box" style="padding: 15px;">
                            <span class="stat-number">${userInstallations.length}</span>
                            <span class="stat-label">Versiones Instaladas</span>
                        </div>
                        <div class="stat-card pixel-box" style="padding: 15px;">
                            <span class="stat-number" id="user-notifications">0</span>
                            <span class="stat-label">Notificaciones</span>
                        </div>
                        <div class="stat-card pixel-box" style="padding: 15px;">
                            <span class="stat-number" id="user-downloads">0</span>
                            <span class="stat-label">Descargas</span>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <h4 style="color: var(--accent); margin-bottom: 10px;">Versiones Instaladas</h4>
                        ${userInstallations.length > 0 ? 
                            `<ul style="list-style: none;">
                                ${userInstallations.map(install => `
                                    <li style="padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                        ${install.versionName} - Instalado el ${new Date(install.installedAt).toLocaleDateString()}
                                    </li>
                                `).join('')}
                            </ul>` :
                            '<p>No tienes versiones instaladas. <a href="#" onclick="showSection(\'versions\')" style="color: var(--accent);">Instalar ahora</a></p>'
                        }
                    </div>
                </div>
            `;
        }
        
        // Cargar notificaciones
        function loadNotificationsContent() {
            const user = appState.currentUser;
            if (!user) return;
            
            const notifications = JSON.parse(localStorage.getItem(DB_KEYS.NOTIFICATIONS)) || [];
            const userNotifications = notifications.filter(n => n.userId === user.id);
            
            const container = document.getElementById('notifications-list');
            
            if (userNotifications.length === 0) {
                container.innerHTML = '<p>No tienes notificaciones.</p>';
                return;
            }
            
            // Ordenar por fecha (más reciente primero)
            userNotifications.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            let html = '';
            userNotifications.forEach(notification => {
                html += `
                    <div class="notification-item ${notification.read ? '' : 'unread'}" onclick="viewNotification(${notification.id})">
                        <div class="notification-title">${notification.title}</div>
                        <div class="notification-meta">
                            ${new Date(notification.timestamp).toLocaleDateString()} - 
                            ${new Date(notification.timestamp).toLocaleTimeString()}
                        </div>
                        <p style="color: #ccc; margin-top: 5px; font-size: 0.9rem;">${notification.message}</p>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        // Cargar panel de administración
        function loadAdminContent() {
            // Verificar que sea admin
            if (!appState.currentUser || appState.currentUser.role !== 'admin') {
                document.getElementById('admin-content').innerHTML = `
                    <div class="version-card pixel-box" style="text-align: center; padding: 40px;">
                        <h3 style="color: var(--accent); margin-bottom: 20px;">Acceso Denegado</h3>
                        <p>Solo los administradores pueden acceder a esta sección.</p>
                    </div>
                `;
                return;
            }
            
            // Mostrar dashboard de admin
            const users = JSON.parse(localStorage.getItem(DB_KEYS.USERS));
            const versions = JSON.parse(localStorage.getItem(DB_KEYS.VERSIONS));
            const stats = JSON.parse(localStorage.getItem(DB_KEYS.STATS));
            
            document.getElementById('admin-content').innerHTML = `
                <div class="version-card pixel-box" style="margin-top: 20px;">
                    <h3 style="color: var(--accent); margin-bottom: 20px;">Resumen del Sistema</h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 30px;">
                        <div class="stat-card pixel-box" style="padding: 15px;">
                            <span class="stat-number">${users.length}</span>
                            <span class="stat-label">Usuarios</span>
                        </div>
                        <div class="stat-card pixel-box" style="padding: 15px;">
                            <span class="stat-number">${versions.length}</span>
                            <span class="stat-label">Versiones</span>
                        </div>
                        <div class="stat-card pixel-box" style="padding: 15px;">
                            <span class="stat-number">${stats.totalDownloads.toLocaleString()}</span>
                            <span class="stat-label">Descargas</span>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        <button class="pixel-btn" onclick="openModal('admin-upload-modal')">
                            <i class="fas fa-cloud-upload-alt"></i> Subir Versión
                        </button>
                        <button class="pixel-btn" onclick="viewUsers()">
                            <i class="fas fa-users"></i> Ver Usuarios
                        </button>
                        <button class="pixel-btn" onclick="sendGlobalNotification()">
                            <i class="fas fa-bullhorn"></i> Anuncio Global
                        </button>
                    </div>
                </div>
            `;
        }
        
        // Cargar documentación
        function loadDocumentationContent() {
            // Contenido básico de documentación
            document.getElementById('documentation-content').innerHTML = '';
        }
        
        // =============================================
        // FUNCIONES DEL JUEGO
        // =============================================
        
        // Instalar una versión
        function installVersion(versionId) {
            // Verificar autenticación
            if (!appState.currentUser) {
                showAuthModal('login');
                return;
            }
            
            // Ir a la sección de instalación
            showSection('install');
            
            // Iniciar instalación después de un breve retraso
            setTimeout(() => {
                startInstallation(versionId);
            }, 500);
        }
        
        // Iniciar instalación
        function startInstallation(versionId = null) {
            // Mostrar controles de progreso
            document.getElementById('install-controls').style.display = 'none';
            document.getElementById('install-progress-container').style.display = 'block';
            document.getElementById('install-complete').style.display = 'none';
            
            // Reiniciar pasos
            for (let i = 1; i <= 5; i++) {
                const step = document.getElementById(`step${i}`);
                step.className = 'install-step';
            }
            
            // Iniciar simulación de instalación
            simulateInstallation(versionId);
        }
        
        // Simular instalación
        function simulateInstallation(versionId) {
            let progress = 0;
            const progressBar = document.getElementById('install-progress-bar');
            const installStatus = document.getElementById('install-status');
            
            // Obtener información de la versión
            const versions = JSON.parse(localStorage.getItem(DB_KEYS.VERSIONS)) || [];
            const version = versionId ? 
                versions.find(v => v.id === versionId) : 
                versions.find(v => v.isLatest) || versions[0];
            
            // Actualizar estadísticas de descargas
            if (version) {
                version.downloads = (version.downloads || 0) + 1;
                localStorage.setItem(DB_KEYS.VERSIONS, JSON.stringify(versions));
                
                // Actualizar estadísticas globales
                const stats = JSON.parse(localStorage.getItem(DB_KEYS.STATS));
                stats.totalDownloads += 1;
                localStorage.setItem(DB_KEYS.STATS, JSON.stringify(stats));
            }
            
            // Simular pasos de instalación
            const steps = [
                { id: 1, name: 'Verificando sistema...', duration: 1000 },
                { id: 2, name: 'Descargando archivos...', duration: 2000 },
                { id: 3, name: 'Instalando...', duration: 1500 },
                { id: 4, name: 'Configurando...', duration: 1000 },
                { id: 5, name: 'Finalizando...', duration: 500 }
            ];
            
            steps.forEach((step, index) => {
                setTimeout(() => {
                    // Actualizar paso actual
                    document.getElementById(`step${step.id}`).className = 'install-step active';
                    installStatus.textContent = step.name;
                    
                    // Actualizar progreso
                    progress = ((index + 1) / steps.length) * 100;
                    progressBar.style.width = `${progress}%`;
                    
                    // Marcar paso como completado
                    setTimeout(() => {
                        document.getElementById(`step${step.id}`).className = 'install-step completed';
                        
                        // Si es el último paso, mostrar completado
                        if (index === steps.length - 1) {
                            setTimeout(() => {
                                completeInstallation(version);
                            }, 500);
                        }
                    }, step.duration - 200);
                }, steps.slice(0, index).reduce((sum, s) => sum + s.duration, 0));
            });
        }
        
        // Completar instalación
        function completeInstallation(version) {
            // Registrar instalación
            if (appState.currentUser && version) {
                const installations = JSON.parse(localStorage.getItem(DB_KEYS.INSTALLATIONS)) || {};
                const userId = appState.currentUser.id;
                
                if (!installations[userId]) {
                    installations[userId] = [];
                }
                
                installations[userId].push({
                    versionId: version.id,
                    versionName: version.name,
                    installedAt: new Date().toISOString()
                });
                
                localStorage.setItem(DB_KEYS.INSTALLATIONS, JSON.stringify(installations));
            }
            
            // Mostrar completado
            document.getElementById('install-progress-container').style.display = 'none';
            document.getElementById('install-complete').style.display = 'block';
            
            // Enviar notificación
            if (appState.currentUser) {
                showNotification('¡Instalación completada!', `${version ? version.name : 'Wheelie Life'} se ha instalado correctamente.`, 'success');
            }
            
            // Actualizar estadísticas
            updateStats();
        }
        
        // Verificar si una versión está instalada
        function checkIfInstalled(versionId) {
            if (!appState.currentUser) return false;
            
            const installations = JSON.parse(localStorage.getItem(DB_KEYS.INSTALLATIONS)) || {};
            const userInstallations = installations[appState.currentUser.id] || [];
            
            return userInstallations.some(install => install.versionId === versionId);
        }
        
        // Lanzar el juego
        function launchGame() {
            // Abrir el juego en una nueva ventana
            window.open('https://aminbena010-ai.github.io/WHEELIE-LIFE/', '_blank');
            
            // Mostrar notificación
            showNotification('¡A jugar!', 'Wheelie Life se está iniciando...', 'info');
        }
        
        // =============================================
        // FUNCIONES DE NOTIFICACIONES
        // =============================================
        
        // Mostrar notificación
        function showNotification(title, message, type = 'info') {
            // Crear notificación
            const notification = {
                id: Date.now(),
                userId: appState.currentUser ? appState.currentUser.id : null,
                title,
                message,
                type,
                timestamp: new Date().toISOString(),
                read: false
            };
            
            // Guardar en base de datos
            const notifications = JSON.parse(localStorage.getItem(DB_KEYS.NOTIFICATIONS)) || [];
            notifications.push(notification);
            localStorage.setItem(DB_KEYS.NOTIFICATIONS, JSON.stringify(notifications));
            
            // Actualizar contador
            updateNotificationCount();
            
            // Mostrar notificación en tiempo real si estamos en la sección de notificaciones
            if (appState.currentSection === 'notifications') {
                loadNotificationsContent();
            }
            
            // Mostrar notificación emergente
            showPopupNotification(title, message, type);
        }
        
        // Mostrar notificación emergente
        function showPopupNotification(title, message, type) {
            // Crear elemento de notificación
            const notification = document.createElement('div');
            notification.className = 'version-card pixel-box';
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                max-width: 350px;
                z-index: 1001;
                animation: fadeIn 0.5s ease;
                border-left: 5px solid ${type === 'success' ? 'var(--success)' : type === 'warning' ? 'var(--warning)' : 'var(--info)'};
            `;
            
            notification.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <h4 style="color: var(--accent); margin: 0;">${title}</h4>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: none; border: none; color: var(--secondary); cursor: pointer;">
                        &times;
                    </button>
                </div>
                <p style="margin: 0; color: #ccc;">${message}</p>
            `;
            
            document.body.appendChild(notification);
            
            // Auto-eliminar después de 5 segundos
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 5000);
        }
        
        // Ver notificación
        function viewNotification(notificationId) {
            const notifications = JSON.parse(localStorage.getItem(DB_KEYS.NOTIFICATIONS)) || [];
            const notificationIndex = notifications.findIndex(n => n.id === notificationId);
            
            if (notificationIndex !== -1) {
                // Marcar como leída
                notifications[notificationIndex].read = true;
                localStorage.setItem(DB_KEYS.NOTIFICATIONS, JSON.stringify(notifications));
                
                // Mostrar contenido en modal
                const notification = notifications[notificationIndex];
                document.getElementById('notification-content').innerHTML = `
                    <h3 style="color: var(--accent); margin-bottom: 15px;">${notification.title}</h3>
                    <div style="color: #aaa; margin-bottom: 15px; font-size: 0.9rem;">
                        ${new Date(notification.timestamp).toLocaleDateString()} 
                        ${new Date(notification.timestamp).toLocaleTimeString()}
                    </div>
                    <p>${notification.message}</p>
                `;
                
                openModal('notification-modal');
                
                // Actualizar lista de notificaciones
                updateNotificationCount();
                loadNotificationsContent();
            }
        }
        
        // =============================================
        // FUNCIONES DE ADMINISTRACIÓN
        // =============================================
        
        // Mostrar panel de admin específico
        function showAdminPanel(panel) {
            // Por ahora solo implementamos subir versión
            if (panel === 'upload') {
                openModal('admin-upload-modal');
            } else if (panel === 'users') {
                viewUsers();
            } else if (panel === 'messages') {
                sendGlobalNotification();
            }
        }
        
        // Subir nueva versión
        function uploadNewVersion() {
            const name = document.getElementById('version-name').value;
            const version = document.getElementById('version-number').value;
            const desc = document.getElementById('version-desc').value;
            const url = document.getElementById('version-url').value;
            const size = document.getElementById('version-size').value;
            const type = document.getElementById('version-type').value;
            
            // Validar URL de Drive
            if (!url.includes('drive.google.com')) {
                alert('Por favor, introduce una URL válida de Google Drive.');
                return;
            }
            
            // Obtener versiones existentes
            const versions = JSON.parse(localStorage.getItem(DB_KEYS.VERSIONS)) || [];
            
            // Crear nueva versión
            const newVersion = {
                id: Date.now(),
                name,
                version,
                date: new Date().toISOString().split('T')[0],
                size,
                description: desc,
                features: ['Nueva actualización', 'Mejoras de rendimiento', 'Corrección de errores'],
                type,
                downloads: 0,
                isLatest: true
            };
            
            // Marcar otras versiones como no latest
            versions.forEach(v => v.isLatest = false);
            
            // Agregar nueva versión
            versions.push(newVersion);
            localStorage.setItem(DB_KEYS.VERSIONS, JSON.stringify(versions));
            
            // Cerrar modal
            closeModal('admin-upload-modal');
            
            // Mostrar notificación
            showNotification('¡Nueva versión publicada!', `${name} (${version}) ha sido publicado.`, 'success');
            
            // Enviar notificación a todos los usuarios
            sendNotificationToAllUsers(
                '¡Nueva actualización disponible!',
                `Se ha publicado ${name} (${version}). Descárgala ahora desde la sección de versiones.`
            );
            
            // Recargar sección de versiones
            if (appState.currentSection === 'versions') {
                loadVersionsContent();
            }
            
            // Actualizar estadísticas
            updateStats();
        }
        
        // Ver usuarios
        function viewUsers() {
            const users = JSON.parse(localStorage.getItem(DB_KEYS.USERS));
            
            let html = '<h3 style="color: var(--accent); margin-bottom: 20px;">Usuarios Registrados</h3>';
            html += '<div style="overflow-x: auto;">';
            html += '<table style="width: 100%; border-collapse: collapse;">';
            html += '<thead><tr style="background: rgba(0,0,0,0.3);"><th style="padding: 10px; text-align: left;">ID</th><th style="padding: 10px; text-align: left;">Usuario</th><th style="padding: 10px; text-align: left;">Email</th><th style="padding: 10px; text-align: left;">Rol</th><th style="padding: 10px; text-align: left;">Registro</th></tr></thead>';
            html += '<tbody>';
            
            users.forEach(user => {
                html += `<tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <td style="padding: 10px;">${user.id}</td>
                    <td style="padding: 10px;">${user.username}</td>
                    <td style="padding: 10px;">${user.email}</td>
                    <td style="padding: 10px;">${user.role}</td>
                    <td style="padding: 10px;">${new Date(user.createdAt).toLocaleDateString()}</td>
                </tr>`;
            });
            
            html += '</tbody></table></div>';
            
            document.getElementById('admin-content').innerHTML = `
                <div class="version-card pixel-box" style="margin-top: 20px;">
                    ${html}
                    <div style="margin-top: 20px;">
                        <button class="pixel-btn" onclick="exportUsers()">
                            <i class="fas fa-download"></i> Exportar Usuarios
                        </button>
                    </div>
                </div>
            `;
        }
        
        // Exportar usuarios
        function exportUsers() {
            const users = JSON.parse(localStorage.getItem(DB_KEYS.USERS));
            const csv = convertToCSV(users);
            downloadCSV(csv, 'wheelie_life_usuarios.csv');
            
            showNotification('Usuarios exportados', 'La lista de usuarios ha sido descargada.', 'success');
        }
        
        // Enviar notificación global
        function sendGlobalNotification() {
            const title = prompt('Título de la notificación:');
            if (!title) return;
            
            const message = prompt('Mensaje de la notificación:');
            if (!message) return;
            
            // Enviar a todos los usuarios
            sendNotificationToAllUsers(title, message);
            
            showNotification('Notificación enviada', 'La notificación ha sido enviada a todos los usuarios.', 'success');
        }
        
        // Enviar notificación a todos los usuarios
        function sendNotificationToAllUsers(title, message) {
            const users = JSON.parse(localStorage.getItem(DB_KEYS.USERS));
            const notifications = JSON.parse(localStorage.getItem(DB_KEYS.NOTIFICATIONS)) || [];
            
            users.forEach(user => {
                const notification = {
                    id: Date.now() + Math.random(),
                    userId: user.id,
                    title,
                    message,
                    type: 'info',
                    timestamp: new Date().toISOString(),
                    read: false
                };
                
                notifications.push(notification);
            });
            
            localStorage.setItem(DB_KEYS.NOTIFICATIONS, JSON.stringify(notifications));
        }
        
        // =============================================
        // FUNCIONES UTILITARIAS
        // =============================================
        
        // Actualizar estadísticas
        function updateStats() {
            const stats = JSON.parse(localStorage.getItem(DB_KEYS.STATS)) || {};
            const users = JSON.parse(localStorage.getItem(DB_KEYS.USERS)) || [];
            
            document.getElementById('stat-downloads').textContent = stats.totalDownloads?.toLocaleString() || '0';
            document.getElementById('stat-users').textContent = users.length.toLocaleString();
            
            // Actualizar estadísticas en tiempo real
            updateOnlineUsers();
        }
        
        // Actualizar usuarios online (simulado)
        function updateOnlineUsers() {
            // Número aleatorio entre 50 y 500
            const online = Math.floor(Math.random() * 450) + 50;
            document.getElementById('stat-online').textContent = online.toLocaleString();
        }
        
        // Abrir documentación
        function openDocumentation(type) {
            let url = '';
            let title = '';
            
            switch(type) {
                case 'guide':
                    title = 'Guía de Inicio';
                    url = 'https://aminbena010-ai.github.io/WHEELIE-LIFE/guide';
                    break;
                case 'controls':
                    title = 'Controles';
                    url = 'https://aminbena010-ai.github.io/WHEELIE-LIFE/controls';
                    break;
                case 'eula':
                    title = 'Licencia y Términos';
                    url = 'https://aminbena010-ai.github.io/WHEELIE-LIFE/eula';
                    break;
            }
            
            // Abrir en nueva pestaña
            window.open(url, '_blank');
            
            // Mostrar notificación
            showNotification(`Documentación abierta`, `${title} se ha abierto en una nueva pestaña.`, 'info');
        }
        
        // Abrir modal
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }
        
        // Cerrar modal
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        // Obtener color aleatorio
        function getRandomColor() {
            const colors = ['#4a6fa5', '#ff6b6b', '#ffd166', '#4CAF50', '#9b59b6', '#1abc9c', '#e74c3c', '#3498db'];
            return colors[Math.floor(Math.random() * colors.length)];
        }
        
        // Convertir a CSV
        function convertToCSV(objArray) {
            const array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;
            let str = 'ID,Usuario,Email,Rol,Fecha Registro\r\n';
            
            for (let i = 0; i < array.length; i++) {
                let line = '';
                line += array[i].id + ',';
                line += array[i].username + ',';
                line += array[i].email + ',';
                line += array[i].role + ',';
                line += new Date(array[i].createdAt).toLocaleDateString();
                str += line + '\r\n';
            }
            
            return str;
        }
        
        // Descargar CSV
        function downloadCSV(csv, filename) {
            const csvFile = new Blob([csv], { type: 'text/csv' });
            const downloadLink = document.createElement('a');
            downloadLink.download = filename;
            downloadLink.href = window.URL.createObjectURL(csvFile);
            downloadLink.style.display = 'none';
            document.body.appendChild(downloadLink);
            downloadLink.click();
            document.body.removeChild(downloadLink);
        }
        
        // Inicializar tooltips
        function initTooltips() {
            // Esta función se podría expandir para añadir tooltips
        }
    </script>
</body>
</html>